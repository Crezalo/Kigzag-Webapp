(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[525],{67139:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/revenue",function(){return r(80630)}])},80630:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return eo}});var i=r(85893),n=r(79895),a=r(81719),s=r(62097),o=r(93789),l=r(64631),d=r(20784),c=r(85214),p=r(14412),x=r(80562),u=r(326),h=r(19572),g=r(26215),f=r(81284),j=r(95309),m=r(29901),y=r(14548),v=r(47621),w=r(54167),b=r(55406),Z=r(71859),S=r(52135),k=r(67294),C=r(9008),D=r.n(C),F=r(22318),M=r(75445),T=r(73794),N=r(95366),z=r(74977),P=r(14195),E=r(3023),_=r(75358),B=r(14888),q=r(19264),W=r(56880),A=r(53199),V=r(30031),U=r(65550),L=r(37497),R=r(41120),I=r(41749),K=r(50253),X=r(11163),O=r.n(X),Y=r(86554),H=r(97520),Q=r(87822),G=r(87927);let J=(0,R.Z)(e=>({textfieldMsg:{width:"65vw","& .MuiFormLabel-root":{fontSize:"18px"}}})),$=e=>{let{order:t,title:r,variantname:n}=e,a=S.Z.getUsername(),[s,o]=(0,k.useState)(""),l=J();return(0,k.useEffect)(()=>{(async function(){if(3==t.ordertype){let e=await (0,L.KS)(t.productid);e[0]&&o(e[0].signedurl)}})()},[a]),(0,i.jsx)(i.Fragment,{children:-1!==t.ordertype&&(null==t?void 0:t.creator)!=""?(0,i.jsxs)("div",{className:"cartItemCard pointer",style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",width:(null==t?void 0:t.ordertype)==2?"35vw":(null==t?void 0:t.ordertype)==3?"100vw":"25vw"},onClick(){O().push({pathname:(null==t?void 0:t.ordertype)==2?"/merch":(null==t?void 0:t.ordertype)==1?"/course":"/creatorprofile",query:(null==t?void 0:t.ordertype)==2?{productid:t.productid}:(null==t?void 0:t.ordertype)==1?{courseid:t.seriesid}:{address:t.creator}})},children:[3!==t.ordertype?(0,i.jsxs)("div",{style:{padding:"0px 5px 8px 15px",width:"55%"},children:[(0,i.jsx)("h1",{style:{fontSize:"14px"},children:(0,H.a)(r,40)}),(0,i.jsx)("h1",{style:{fontSize:"13px",color:"grey",fontWeight:"bold"},children:(0,H.a)(n,100)}),(0,i.jsxs)("h1",{style:{fontSize:"13px",color:"purple",fontWeight:"bold"},children:["Ordered on"," ",new Date(Date.parse(t.boughtat)).getDate()+" "+G.Z[new Date(Date.parse(t.boughtat)).getMonth()]+" "+new Date(Date.parse(t.boughtat)).getFullYear()]}),(0,i.jsx)("h1",{style:{fontSize:"13px",color:"blue",fontWeight:"bold"},children:["Packing","Shipped","Delivered"][t.deliverystatus]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"cartItemCardImageElement",children:(0,i.jsx)(Y.Z,{creator:t.creator,height:90,width:90})}),(0,i.jsxs)("div",{style:{padding:"0px 5px 8px 15px"},children:[(0,i.jsx)("h1",{style:{fontWeight:"bold",marginTop:"5px",color:"#3B82F6"},children:t.creator}),(0,i.jsxs)("h1",{style:{fontWeight:"bold",marginTop:"5px"},children:["₹ ",t.amount]}),(0,i.jsx)(Q.Z,{className:l.textfieldMsg,label:"Message",type:"text",multiline:!0,variant:"filled",value:t.message}),(0,i.jsxs)("h1",{style:{fontSize:"13px",color:"blue",fontWeight:"bold",marginTop:"5px"},children:["Tipped on"," ",new Date(Date.parse(t.tippedat)).getDate()+" "+G.Z[new Date(Date.parse(t.tippedat)).getMonth()]+" "+new Date(Date.parse(t.tippedat)).getFullYear()]})]})]}),2==t.ordertype?(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",float:"right"},children:[(0,i.jsx)(Q.Z,{label:"Qty",type:"number",size:"small",variant:"filled",value:t.quantity,style:{width:"5vw",padding:"5px",marginRight:"10px"}}),(0,i.jsxs)("h1",{style:{fontWeight:"bold",marginTop:"5px"},children:["₹",t.buyingprice]})]}):(0,i.jsx)(i.Fragment,{})]}):(0,i.jsx)(i.Fragment,{})})},ee=(0,R.Z)(e=>({paper:{backgroundColor:e.palette.background.paper,borderRadius:"5px",boxShadow:e.shadows[5],color:"white",justifyContent:"center",margin:"10px 20px 20px 20px",overflowX:"hidden",maxHeight:"80vh","&:hover":{boxShadow:"0 10px 18px 8px #173464",borderRadius:"2%"}}})),et=e=>{let{category:t,productid:r,title:n,variantname:a}=e,s=S.Z.getUsername(),o=ee(),[l,d]=(0,k.useState)([{username:"",ordertype:-1,creator:"",seriesid:"",productid:"",expiry_date:"",type:0,quantity:"0",buyingprice:0,deliverystatus:"",deliverystatuslink:"",returnstatus:"",amount:0,message:"",boughtat:"",tippedat:""}]);return(0,k.useEffect)(()=>{(async function(){if("all"!=r||"Perq"==t){let e=[];"Videos"==t?e=await (0,T.I$)():"Courses"==t?e=await (0,N.Nq)():"Merch"==t?e=await (0,A.Up)(r):"Perq"==t&&(e=await (0,V.pQ)()),console.log(e),"string"!=typeof e&&d(e)}})()},[s,r]),(0,k.useEffect)(()=>{var e=l,r="Videos"===t?0:"Courses"===t?1:"Merch"===t?2:"Perq"===t?3:-1;for(let i=0;i<l.length;i++)e[i].ordertype=r;d(e)},[l]),(0,i.jsx)("div",{className:"blueTextBlackBackground",children:(0,i.jsx)(K.Z,{component:"form",sx:{minWidth:150,margin:"20px 5px 15px 5px"},children:(0,i.jsx)(I.Z,{container:!0,direction:"row",spacing:1,children:null==l?void 0:l.map((e,t)=>(0,i.jsx)(i.Fragment,{children:((null==e?void 0:e.creator)!=""||(null==e?void 0:e.productid))&&(null==e?void 0:e.ordertype)!=-1?(0,i.jsx)("div",{className:o.paper,children:(0,i.jsx)(I.Z,{item:!0,xs:4,children:(0,i.jsx)($,{order:e,title:n,variantname:a},t)})}):(0,i.jsx)(i.Fragment,{})}))})})})},er=e=>{var t,r,n,a;let{category:s}=e,o=S.Z.getUsername(),[l,d]=(0,k.useState)(null),[c,p]=(0,k.useState)(Math.random().toString(36).slice(2)),[x,u]=(0,k.useState)([{seriesid:"",title:"",productid:"",variantname:""}]),[h,g]=(0,k.useState)("all");return(0,k.useEffect)(()=>{(async function(){let e=[];if("Videos"==s)e=await (0,T.To)();else if("Courses"==s){e=await (0,N.eV)(h);let t=await (0,U.dG)(o);"string"!=typeof t&&u(t)}else if("Merch"==s){e=await (0,A.ce)(h);let r=await (0,L.r8)(o);"string"!=typeof r&&u(r)}else"Perq"==s&&(e=await (0,V.hD)());console.log(e),"string"!=typeof e&&d(e)})(),p(Math.random().toString(36).slice(2))},[o,h]),console.log("data"),console.log(l),console.log(x),console.log(h),(0,i.jsx)(i.Fragment,{children:l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"blueTextBlackBackground",style:{display:"flex",flexDirection:"row"},children:[(0,i.jsx)(F.Z,{style:{marginTop:"10px",writingMode:"vertical-lr",textOrientation:"mixed",fontSize:"20px"},children:"Videos"===s?"Sales for Premium Video Memberships (in ₹)":"Courses"===s?"Sales for Course Memberships (in ₹)":"Merch"===s?"Sales for Merchandise (in ₹)":"Tips Received (in ₹)"}),(0,i.jsxs)(z.w,{width:800,height:500,data:l,children:[(0,i.jsx)(P.q,{strokeDasharray:"3 3"}),(0,i.jsx)(E.K,{dataKey:"date"}),(0,i.jsx)(_.B,{}),(0,i.jsx)(B.u,{}),(0,i.jsx)(q.D,{}),(0,i.jsx)(W.x,{type:"monotone",dataKey:"total",activeDot:{r:8}})]})]}),"Courses"===s&&(null===(t=x[0])||void 0===t?void 0:t.seriesid)!=""?(0,i.jsx)("div",{className:"blueTextBlackBackground",children:(0,i.jsxs)(M.Z,{id:"type",name:"type",className:"mb-4 border-b-2 form inputSingleLineText",style:{backgroundColor:"white",textAlign:"center",color:"black",resize:"both",textAlignLast:"center",overflow:"none"},onChange(e){g(e.target.value)},children:[(0,i.jsx)("option",{value:"all",children:"Aggregate"}),x.map(e=>(0,i.jsx)("option",{value:e.seriesid,children:e.title}))]})}):(0,i.jsx)(i.Fragment,{}),"Merch"===s&&(null===(r=x[0])||void 0===r?void 0:r.productid)!=""?(0,i.jsx)("div",{className:"blueTextBlackBackground",children:(0,i.jsxs)(M.Z,{id:"type",name:"type",className:"mb-4 border-b-2 form inputSingleLineText",style:{backgroundColor:"white",textAlign:"center",color:"black",resize:"both",textAlignLast:"center",overflow:"none"},onChange(e){g(e.target.value)},children:[(0,i.jsx)("option",{value:"all",children:"Aggregate"}),x.map(e=>(0,i.jsx)("option",{value:e.productid,children:e.title}))]})}):(0,i.jsx)(i.Fragment,{}),l[0]?"":(0,i.jsx)("div",{className:"blueTextBlackBackground",children:(0,i.jsx)(F.Z,{style:{fontSize:"20px",paddingLeft:"15vw"},children:"\uD83D\uDE14 No Sales Yet"})}),"Merch"===s||"Perq"===s?(0,i.jsx)(et,{category:s,productid:h,title:null===(n=x.filter(e=>e.productid==h)[0])||void 0===n?void 0:n.title,variantname:null===(a=x.filter(e=>e.productid==h)[0])||void 0===a?void 0:a.variantname}):(0,i.jsx)(i.Fragment,{})]}):(0,i.jsx)(i.Fragment,{})})},ei=e=>({width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}),en=e=>({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(e.spacing(7)," + 1px)"),[e.breakpoints.up("sm")]:{width:"calc(".concat(e.spacing(8)," + 1px)")}}),ea=(0,a.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:t.spacing(0,1),...t.mixins.toolbar}}),es=(0,a.ZP)(l.ZP,{shouldForwardProp:e=>"open"!==e})(e=>{let{theme:t,open:r}=e;return{width:240,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...r&&{...ei(t),"& .MuiDrawer-paper":ei(t)},...!r&&{...en(t),"& .MuiDrawer-paper":en(t)}}});function eo(){let e=(0,s.Z)(),[t,r]=k.useState(!1),[a,l]=(0,k.useState)(!1),[C,F]=(0,k.useState)("");(0,k.useEffect)(()=>{!async function(){console.log("AuthService.refresh()"),console.log(await S.Z.refresh()),l(S.Z.validateCurrentUserRefreshToken()&&S.Z.validateCurrentUserAccessToken())}()},[]),(0,k.useEffect)(()=>{F(S.Z.getUsername())},[a]);let[M,T]=k.useState(0),N=(e,t)=>{T(t)},z=[(0,i.jsx)(er,{category:"Videos"},1),(0,i.jsx)(er,{category:"Courses"},2),(0,i.jsx)(er,{category:"Merch"},3),(0,i.jsx)(er,{category:"Perq"},4)],P=()=>{r(!0)},E=()=>{r(!1)};return(0,i.jsxs)("div",{children:[(0,i.jsxs)(D(),{children:[(0,i.jsx)("title",{children:"Kigzag: My Purchases"}),(0,i.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,i.jsx)("div",{style:{backgroundColor:"black",display:"flex",flexDirection:"row"},children:""!=C&&a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{paddingTop:"10vh"},children:(0,i.jsx)(o.Z,{sx:{display:"flex"},children:(0,i.jsxs)(es,{variant:"permanent",open:t,children:[t?(0,i.jsx)(ea,{children:(0,i.jsx)(x.Z,{onClick:E,children:"rtl"===e.direction?(0,i.jsx)(g.Z,{}):(0,i.jsx)(h.Z,{})})}):(0,i.jsx)(d.Z,{children:(0,i.jsx)(x.Z,{color:"inherit","aria-label":"open drawer",onClick:P,edge:"start",sx:{marginRight:5,...t&&{display:"none"}},children:(0,i.jsx)(u.Z,{})})}),(0,i.jsx)(p.Z,{}),(0,i.jsx)(c.Z,{children:["Videos","Courses","Merch","Tip Jar"].map((e,r)=>(0,i.jsx)(f.ZP,{disablePadding:!0,sx:{display:"block",color:r==M?"blue":"primary"},onClick:()=>N(event,r),children:(0,i.jsxs)(j.Z,{sx:{minHeight:48,justifyContent:t?"initial":"center",px:2.5},children:[(0,i.jsxs)(m.Z,{sx:{minWidth:0,mr:t?3:"auto",justifyContent:"center",padding:"5px",color:r==M?"#3b82f6":"primary"},children:[0===r?(0,i.jsx)(v.Z,{fontSize:"large"}):(0,i.jsx)(i.Fragment,{}),1===r?(0,i.jsx)(w.Z,{fontSize:"large"}):(0,i.jsx)(i.Fragment,{}),2===r?(0,i.jsx)(b.Z,{fontSize:"large"}):(0,i.jsx)(i.Fragment,{}),3===r?(0,i.jsx)(Z.Z,{fontSize:"large"}):(0,i.jsx)(i.Fragment,{})]}),(0,i.jsx)(y.Z,{primary:e,sx:{opacity:t?1:0}})]})},e))})]})})}),(0,i.jsx)("div",{style:{width:"90vw"},children:(0,i.jsx)(n.Z,{children:z[M]})})]}):(0,i.jsx)(i.Fragment,{})})]})}}},function(e){e.O(0,[442,122,822,431,213,595,774,888,179],function(){return e(e.s=67139)}),_N_E=e.O()}]);