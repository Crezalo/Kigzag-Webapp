(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[955],{2709:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/videoplayer",function(){return t(48786)}])},48786:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return p}});var s=t(85893),o=t(67294),i=t(65550),n=t(11163),a=t.n(n),c=t(17563),l=t(9008),d=t.n(l),u=t(52135),h=t(38196),f=t(93123),v=t(86554),g=t(95366);function p(){let e=(0,n.useRouter)(),{videoid:r}=e.query;if(!r){let t=e.asPath;r=c.parseUrl(t).query.videoid}var l,p,[m,x]=(0,o.useState)("");let[y,j]=(0,o.useState)(!1),[w,S]=(0,o.useState)(""),[N,_]=(0,o.useState)(""),[E,V]=(0,o.useState)(!1),D=(0,o.useRef)(null);(0,o.useEffect)(()=>{!async function(){console.log("AuthService.refresh()"),console.log(await u.Z.refresh()),j(u.Z.validateCurrentUserRefreshToken()&&u.Z.validateCurrentUserAccessToken())}()},[]),(0,o.useEffect)(()=>{S(u.Z.getUsername())},[y]);let[F,k]=(0,o.useState)({title:"",description:"",creator:"",seriesid:"",createdat:""}),P=(l=Date.now(),(p=l-Date.parse(F.createdat))<6e4?Math.round(p/1e3)+" seconds ago":p<36e5?Math.round(p/6e4)+" minutes ago":p<864e5?Math.round(p/36e5)+" hours ago":p<2592e6?Math.round(p/864e5)+" days ago":p<31536e6?Math.round(p/2592e6)+" months ago":Math.round(p/31536e6)+" years ago");return(0,o.useEffect)(()=>{(async function(){if(r){let e=await (0,g.ZU)(r.toString());console.log("result"),console.log(e),"string"!=typeof e&&e&&V(e)}})()},[w,r]),(0,o.useEffect)(()=>{(async function(){if(r){let e=await (0,i.kS)(r.toString());k(e[0])}})()},[r]),(0,o.useEffect)(()=>{(async function(){if(r){var e,t,s;let o=await (0,i.sv)(r.toString());x(o[0].signedurl),null===(e=D.current)||void 0===e||e.pause(),null===(t=D.current)||void 0===t||t.load(),null===(s=D.current)||void 0===s||s.play()}})()},[r]),(0,o.useEffect)(()=>{(async function(){if(""!=F.creator){var e;let r=await (0,h.A)(F.creator,"displaypicture");_(null===(e=r[0])||void 0===e?void 0:e.displaypicture)}})()},[F.creator]),(0,s.jsxs)("div",{children:[(0,s.jsxs)(d(),{children:[(0,s.jsx)("title",{children:F.title}),(0,s.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,s.jsx)("div",{className:"videoDiv",children:y&&m?(0,s.jsxs)(s.Fragment,{children:[E?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("video",{controls:!0,autoPlay:!0,crossOrigin:"anonymous",controlsList:"nodownload",ref:D,children:(0,s.jsx)("source",{src:m,type:"video/mp4"})}),(0,s.jsx)("h1",{className:"videoDiv h1",children:F.title}),(0,s.jsxs)("section",{onClick(){a().push({pathname:"/creatorprofile",query:{address:F.creator}})},className:"creatorIdent pointer",children:[(0,s.jsx)("div",{className:"creatorImageMinor",children:(0,s.jsx)(v.Z,{creator:F.creator,height:50,width:50})}),(0,s.jsx)("h2",{className:"VideoDiv h2",children:F.creator})]}),(0,s.jsx)("h1",{className:"VideoDiv h1",style:{fontSize:"13px",color:"grey"},children:P.startsWith("1 ")?P.replace("s","").replace("econd","second"):P}),(0,s.jsx)("h1",{className:"VideoDiv p",children:F.description})]}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)("div",{style:{marginTop:"5vh"},children:(null==F?void 0:F.seriesid)==="vod_"+(null==F?void 0:F.creator)?(0,s.jsxs)(s.Fragment,{children:[E?(0,s.jsx)("h1",{className:"videoDiv h1",style:{color:"#3B82F6"},children:"Other Videos"}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(f.Z,{creator:F.creator,onCreatorProfile:!1,category:"Videos",ignoreVideoId:r.toString(),onVideoPlayer:!0})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"videoDiv h1",style:{color:"#3B82F6"},children:"Other lectures from course"}),(0,s.jsx)(f.Z,{creator:F.creator,onCreatorProfile:!1,category:"SeriesVideoGrid",seriesid:F.seriesid,ignoreVideoId:r.toString(),onVideoPlayer:!0})]})})]}):(0,s.jsx)(s.Fragment,{})})]})}}},function(e){e.O(0,[142,461,669,123,774,888,179],function(){return e(e.s=2709)}),_N_E=e.O()}]);