(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{57250:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return r(84565)}])},37878:function(e,t){"use strict";t.Z={src:"/_next/static/media/green-tick.c86f07ad.gif",height:498,width:494}},84565:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var s=r(85893),n=r(67294),a=r(55342),l=r(41120),o=r(22318),i=r(282),d=r(52135),c=r(33562),u=r(11163),x=r.n(u),p=r(9669),h=r.n(p),f=r(76095);let g="http://localhost:5000/";async function m(e,t,r,s,n,a,l){try{if(!(0,f.z)().Authorization)return"Not Logged In";{let o=await h().post(g+"user_merchandise/useraddress",{type:e,addressline1:t,addressline2:r,city:s,postalcode:n,country:a,mobileno:l},{headers:(0,f.z)()});if(o.data.isSuccessful)return o.data.result;return o.data.errorMsg}}catch(i){console.log(i)}}async function j(){try{if(!(0,f.z)().Authorization)return"Not Logged In";{let e=await h().get(g+"user_merchandise/useraddress",{headers:(0,f.z)()});if(e.data.isSuccessful)return e.data.result;return e.data.errorMsg}}catch(t){console.log(t)}}let b=(0,l.Z)(e=>({paper:{backgroundColor:e.palette.background.paper,borderRadius:"5px",boxShadow:e.shadows[5],color:"white",display:"flex",flexDirection:"column",justifyContent:"center",margin:"0 20px 20px 20px",padding:e.spacing(3,4,3)},button:{fontSize:20,fontWeight:"bold",textAlign:"center",width:"40%",margin:"20px 20px 10px 0px"},title:{fontWeight:"bold",margin:"10px 0 20px 0",color:"#3B82F6",textAlign:"center"}})),y=e=>{let{stage:t,refresh:r}=e,a=b(),[l,u]=(0,n.useState)(""),[p,h]=(0,n.useState)(!1),[f,g]=(0,n.useState)(0),[m,y]=(0,n.useState)(0),[v,Z]=(0,n.useState)(!0),[S,k]=(0,n.useState)(""),[w,C]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{(async function(){console.log("AuthService.refresh()"),console.log(await d.Z.refresh()),h(d.Z.validateCurrentUserRefreshToken()&&d.Z.validateCurrentUserAccessToken())})()},[]),(0,n.useEffect)(()=>{u(d.Z.getUsername())},[p]),(0,n.useEffect)(()=>{(async function(){let e=await (0,c.Q2)();e[0]&&g(e[0]),e[1]&&y(e[1])})()},[l,r]),(0,n.useEffect)(()=>{(async function(){let e=await (0,c.fq)();if(e[0]){for(let t=0;t<e.length;t++)if(2===e[t].feature){C(!0);break}}})()},[l]),(0,n.useEffect)(()=>{async function e(){let e=await j();e[0]?Z(!0):Z(!1)}"0"===t?Z(!0):e()},[l]),(0,s.jsxs)("div",{className:a.paper,children:[(0,s.jsx)(o.Z,{style:{fontSize:"20px",color:"black",fontWeight:"bold"},children:"Order Summary"}),(0,s.jsx)("hr",{}),(0,s.jsx)("hr",{}),(0,s.jsxs)(o.Z,{style:{fontSize:"18px",color:"black",padding:"5px 0 5px 0"},children:["Items: ₹",f]}),(0,s.jsx)("hr",{}),(0,s.jsxs)(o.Z,{style:{fontSize:"18px",color:"black",padding:"5px 0 5px 0"},children:["Delivery: ₹",m]}),(0,s.jsx)("hr",{}),(0,s.jsxs)(o.Z,{style:{fontSize:"18px",color:"black",padding:"5px 0 5px 0"},children:["Total: ₹",f+m]}),(0,s.jsx)("hr",{}),(0,s.jsx)(i.Z,{style:{background:"#3B82F6",color:"white",marginBottom:"2px"},variant:"contained",onClick(){v?x().push({pathname:"/checkout",query:{stage:"0"===t&&w?1:2}}):k("Please add address")},children:"0"===t&&w?"Proceed To Buy":"Buy"}),(0,s.jsx)(o.Z,{style:{color:"red",textAlign:"center"},children:S})]})};var v=r(17563),Z=r(60391),S=r(31944),k=r(22841),w=r(55343),C=r(6599),N=r(85161),A=r(42836),z=r(25675),E=r.n(z),W=r(37878),I=r(93789),T=r(23953);let B=(0,l.Z)(e=>({modal:{display:"flex",alignItems:"center",justifyContent:"center",overflowY:"scroll"},paper:{backgroundColor:e.palette.background.paper,borderRadius:"5px",boxShadow:e.shadows[5],color:"white",display:"flex",flexDirection:"column",justifyContent:"center",margin:"0 20px 20px 20px",padding:e.spacing(0,4,3)},button:{fontSize:20,fontWeight:"bold",textAlign:"center",width:"40%",margin:"20px 20px 10px 0px"},title:{fontWeight:"bold",margin:"10px 0 20px 0",color:"#3B82F6",textAlign:"center"},label:{fontWeight:"bold",margin:"5px 0 5px 0",color:"#3B82F6"},edit:{margin:"10px","&:hover":{color:"rgb(76, 175, 80)"}},error:{color:"red",fontSize:"16px",backgroundColor:"white",borderRadius:"5px"},textfield:{margin:"5px 0 5px 0","& .MuiFormLabel-root":{fontSize:"18px"},"& .MuiInput-underline:after":{borderBottomColor:"#3b82f6"}}}));(0,C.Z)({overrides:{MuiTooltip:{tooltip:{fontSize:"15px"}}}});let _=()=>{let e=B(),[t,r]=(0,n.useState)(""),[a,l]=(0,n.useState)(!1),[o,c]=(0,n.useState)(""),[u,x]=(0,n.useState)(!1);(0,n.useEffect)(()=>{!async function(){console.log("AuthService.refresh()"),console.log(await d.Z.refresh()),l(d.Z.validateCurrentUserRefreshToken()&&d.Z.validateCurrentUserAccessToken())}()},[]),(0,n.useEffect)(()=>{r(d.Z.getUsername())},[a]);let[p,h]=(0,n.useState)("Home"),[f,g]=(0,n.useState)(""),[j,b]=(0,n.useState)(""),[y,v]=(0,n.useState)(""),[Z,S]=(0,n.useState)(0),[k,w]=(0,n.useState)("India"),[C,z]=(0,n.useState)(0),_=async()=>{let e;(e=await m(p,f,j,y,Z,k,C))[0]?x(!0):c(e)};return(0,s.jsxs)("div",{className:e.paper,children:[u?(0,s.jsx)("div",{children:(0,s.jsx)(E(),{src:W.Z,alt:"",width:200,height:200})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)(I.Z,{component:"form",sx:{minWidth:150,margin:"20px 5px 15px 5px"},children:[(0,s.jsx)(N.Z,{className:e.title,children:"ADD NEW ADDRESSLINE"}),(0,s.jsx)(N.Z,{className:e.label,children:"Type"}),(0,s.jsxs)(T.Z,{id:"type",name:"type",className:"mb-4 border-b-2 form inputSingleLineText",style:{color:"black",resize:"both",width:"20vw",overflow:"none"},onChange(e){h(e.target.value)},required:!0,children:[(0,s.jsx)("option",{value:"Home",children:"Home"}),(0,s.jsx)("option",{value:"Work",children:"Work"}),(0,s.jsx)("option",{value:"Home2",children:"Home2"}),(0,s.jsx)("option",{value:"Work2",children:"Work2"}),(0,s.jsx)("option",{value:"Home3",children:"Home3"}),(0,s.jsx)("option",{value:"Work3",children:"Work3"}),(0,s.jsx)("option",{value:"Home4",children:"Home4"}),(0,s.jsx)("option",{value:"Work4",children:"Work4"})]}),(0,s.jsx)(N.Z,{className:e.label,children:"Address Line 1"}),(0,s.jsx)(A.Z,{className:e.textfield,type:"string",InputLabelProps:{shrink:!0},variant:"outlined",defaultValue:"",onChange(e){g(e.target.value)}}),(0,s.jsx)(N.Z,{className:e.label,children:"Address Line 2"}),(0,s.jsx)(A.Z,{className:e.textfield,type:"string",InputLabelProps:{shrink:!0},variant:"outlined",defaultValue:"",onChange(e){b(e.target.value)}}),(0,s.jsx)(N.Z,{className:e.label,children:"City"}),(0,s.jsx)(A.Z,{className:e.textfield,type:"string",InputLabelProps:{shrink:!0},variant:"outlined",defaultValue:"",onChange(e){v(e.target.value)}}),(0,s.jsx)(N.Z,{className:e.label,children:"Postal Code"}),(0,s.jsx)(A.Z,{className:e.textfield,type:"number",InputLabelProps:{shrink:!0},variant:"outlined",defaultValue:0,onChange(e){S(parseInt(e.target.value))}}),(0,s.jsx)(N.Z,{className:e.label,children:"Country"}),(0,s.jsx)(A.Z,{className:e.textfield,type:"string",InputLabelProps:{shrink:!0},variant:"outlined",defaultValue:"India",onChange(e){w(e.target.value)}}),(0,s.jsx)(N.Z,{className:e.label,children:"Contact Number"}),(0,s.jsx)(A.Z,{className:e.textfield,type:"number",InputLabelProps:{shrink:!0},variant:"outlined",defaultValue:0,onChange(e){z(parseInt(e.target.value))}})]}),(0,s.jsx)(i.Z,{style:{background:"#3B82F6",color:"white",marginBottom:"2px"},variant:"contained",onClick:_,children:"Add"})]}),(0,s.jsx)("p",{className:e.error,children:o})]})};var F=r(81760);let U=(0,l.Z)(e=>({paper:{backgroundColor:e.palette.background.paper,borderRadius:"5px",boxShadow:e.shadows[5],color:"white",display:"flex",flexDirection:"column",justifyContent:"center",margin:"0 20px 20px 20px",padding:e.spacing(3,4,3)},button:{fontSize:20,fontWeight:"bold",textAlign:"center",width:"40%",margin:"20px 20px 10px 0px"},title:{fontWeight:"bold",margin:"10px 0 20px 0",color:"#3B82F6",textAlign:"center"}})),L=e=>{let{setAddress:t}=e,r=U(),[a,l]=(0,n.useState)(""),[i,c]=(0,n.useState)(!1),[u,x]=(0,n.useState)([{addressid:"",username:"",type:"",addressline1:"",addressline2:"",city:"",postalcode:0,country:"",mobileno:0}]);(0,n.useEffect)(()=>{!async function(){console.log("AuthService.refresh()"),console.log(await d.Z.refresh()),c(d.Z.validateCurrentUserRefreshToken()&&d.Z.validateCurrentUserAccessToken())}()},[]),(0,n.useEffect)(()=>{l(d.Z.getUsername())},[i]),(0,n.useEffect)(()=>{!async function(){let e=await j();e[0]&&(x(e),t(e[0]))}()},[a]);let p=e=>{t(u[parseInt(e.target.value)])};return(0,s.jsxs)("div",{className:r.paper,children:[""!=u[0].addressid?(0,s.jsx)(w.Z,{children:(0,s.jsx)(S.Z,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:0,name:"radio-buttons-group",onChange:p,children:u.map((e,t)=>(0,s.jsxs)("div",{style:{paddingBottom:"20px"},children:[(0,s.jsx)(k.Z,{value:t,control:(0,s.jsx)(Z.Z,{}),label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{style:{fontSize:"18px",color:"black",fontWeight:"bold"},children:e.type}),(0,s.jsxs)(o.Z,{style:{fontSize:"18px",color:"black",padding:"5px 0 5px 0"},children:[e.addressline1,", ",e.addressline2,", ",e.city,","," ",e.country," - ",e.postalcode]}),(0,s.jsx)(o.Z,{style:{fontSize:"18px",color:"black",padding:"5px 0 5px 0"},children:e.mobileno})]})}),(0,s.jsx)("hr",{}),(0,s.jsx)("hr",{})]}))})}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(F.Z,{modalButtonText:"Add New Address",modalBody:(0,s.jsx)(_,{})})]})};function P(){let e=(0,u.useRouter)(),{stage:t}=e.query;if(!t){var r,l;let o=e.asPath;t=null===(r=v.parseUrl(o))||void 0===r?void 0:null===(l=r.query)||void 0===l?void 0:l.stage}let[i,c]=(0,n.useState)({addressid:"",username:"",type:"",addressline1:"",addressline2:"",city:"",postalcode:0,country:"",mobileno:0}),[x,p]=(0,n.useState)([]),[h,f]=(0,n.useState)(""),[g,m]=(0,n.useState)(!1),[j,b]=(0,n.useState)(Math.random().toString(36).slice(2));return(0,n.useEffect)(()=>{(async function(){console.log("AuthService.refresh()"),console.log(await d.Z.refresh()),m(d.Z.validateCurrentUserRefreshToken()&&d.Z.validateCurrentUserAccessToken())})()},[]),(0,n.useEffect)(()=>{f(d.Z.getUsername())},[g]),(0,s.jsxs)("div",{children:["0"===t?(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,s.jsx)("div",{style:{width:"70vw",margin:"5%"},children:(0,s.jsx)(a.Z,{showContinueToCheckoutButton:!1,setCartItemsUp:p,setRefresh:b})}),(0,s.jsx)("div",{style:{width:"30vw",margin:"5%"},children:x.length>0?(0,s.jsx)(y,{stage:"0",refresh:j}):(0,s.jsx)(s.Fragment,{})})]}):(0,s.jsx)(s.Fragment,{}),"1"===t?(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,s.jsx)("div",{style:{width:"60vw",margin:"5%"},children:(0,s.jsx)(L,{setAddress:c})}),(0,s.jsx)("div",{style:{width:"30vw",margin:"5%"},children:(null==x?void 0:x.length)>0?(0,s.jsx)(y,{stage:"1",refresh:j}):(0,s.jsx)(s.Fragment,{})})]}):(0,s.jsx)(s.Fragment,{}),"2"===t?(0,s.jsx)("div",{}):(0,s.jsx)(s.Fragment,{})]})}}},function(e){e.O(0,[85,190,774,888,179],function(){return e(e.s=57250)}),_N_E=e.O()}]);